(module
  (type (func (param i32) (result i32 i32)))
  (type (func (param i32 i32) (result i32)))
  (type (func (param i32 i32 i32) (result i32)))
  (type (func (param i32 i32 i32 i32) (result i32)))
  (type (func (param i32) (result i32)))
  (type (func (param i32 i32) (result i32 i32)))

  (table 8 funcref)
  (elem (i32.const 0) 0 1 2 3 4 5 6 7)

  (export "start" (func 4))

  (func $0 (type 5) (param i32 i32) (result i32 i32)
    local.get 0
    local.get 1
    i32.const 0
    call 4
    i32.const 0
  )

  (func $1 (type 3) (param i32 i32 i32 i32) (result i32)
    i32.const 0
    (if (result i32)
      (then
        local.get 0
        local.get 1
        local.get 2
        local.get 3
        drop
        i32.add
        call 7
        drop 
      )
      (else
        local.get 0
        local.get 1
        local.get 2
        local.get 3
        i32.add
        drop
        call 6
      )
    )
  )

  (func $2 (type 5) (param i32 i32) (result i32 i32)
    i32.const 0
    (if (result i32 i32)
      (then
        local.get 0
        local.get 1
        i32.const 0
        i32.const 4
        call_indirect (type 2)
        i32.const 0
      )
      (else
        local.get 0
        local.get 1
        i32.const 0
        i32.const 0
        call 1
        i32.const 0
      )
    )
  )

  (func $3 (type 5) (param i32 i32) (result i32 i32)
    i32.const 1
    (if (result i32 i32)
      (then
        local.get 0
        local.get 1
        i32.const 0
        i32.const 0
        i32.const 5
        call_indirect (type 3)
        i32.const 0
      )
      (else
        local.get 0
        local.get 1
        i32.const 0
        i32.const 0
        i32.const 1
        call_indirect (type 3)
        i32.const 0
      )
    )
  )

  (func $4 (type 2) (param i32 i32 i32) (result i32)
    local.get 0
    local.get 1
    local.get 2
    drop
    i32.const 0
    call_indirect (type 5)
    drop 
  )

  (func $5 (type 3) (param i32 i32 i32 i32) (result i32)
    local.get 0
    local.get 1
    local.get 2
    local.get 3
    i32.const 5
    call_indirect (type 3)
  )

  (func $6 (type 1) (param i32 i32) (result i32)
    local.get 0
    local.get 1
    i32.const 0
    i32.const 0
    call 5
  )

  (func $7 (type 5) (param i32 i32) (result i32 i32)
    local.get 0
    local.get 1
    i32.const 2
    call_indirect (type 5)
  )
)
